@startuml
' Сбалансированная диаграмма: не слишком высокая и не слишком широкая

left to right direction
skinparam linetype ortho
skinparam nodesep 40
skinparam ranksep 40
skinparam padding 8
skinparam roundcorner 20

actor "Пользователь" as user
actor "Менеджер" as manager
actor "Администратор" as admin
actor "Магазин" as market

rectangle "Система Цифровой Торговой Площадки" {
    ' Первый ряд пакетов
    package "Аутентификация" {
        [Регистрация пользователя]
        [Вход в систему]
        [Сброс пароля]
    }
    package "Товары" {
        [Каталог товаров]
        [Поиск товаров]
        [Сравнение цен]
    }
    package "Покупки" {
        [Корзина покупок]
        [Оформление заказа]
        [История покупок]
    }
    ' Второй ряд пакетов
    package "Интеграция с магазинами" {
        [API магазина]
        [Агрегация цен]
        [Синхронизация товаров]
    }
    package "Управление" {
        [Управление пользователями]
        [Управление магазинами]
        [Настройки системы]
    }
}

' Связи пользователя
user --> [Регистрация пользователя]
user --> [Вход в систему]
user --> [Каталог товаров]
user --> [Поиск товаров]
user --> [Сравнение цен]
user --> [Корзина покупок]
user --> [Оформление заказа]
user --> [История покупок]

' Связи менеджера
manager --> [Управление товарами]
manager --> [Интеграция с магазинами]
manager --> [Покупки]

' Связи администратора
admin --> [Панель администратора]
admin --> [Управление пользователями]
admin --> [Управление магазинами]
admin --> [Настройки системы]

' Связи магазина
market --> [API магазина]
market --> [Агрегация цен]

' Включения и расширения
[Поиск товаров] ..> [Сравнение цен] : <<include>>
[Оформление заказа] ..> [История покупок] : <<include>>
[API магазина] ..> [Агрегация цен] : <<include>>
[Каталог товаров] ..> [Поиск товаров] : <<extend>>
[Интеграция с магазинами] ..> [Синхронизация товаров] : <<extend>>
[Панель администратора] ..> [Настройки системы] : <<extend>>
@enduml 